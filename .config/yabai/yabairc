#!/usr/bin/env sh
yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
sudo yabai --load-sa

yabai -m config debug_output on

# defaults
yabai                         -m       config \
    external_bar              all:32:0 \
    top_padding               16       \
    bottom_padding            16       \
    left_padding              16       \
    right_padding             16       \
    window_gap                16       \
    window_opacity            on       \
    window_animation_duration 0.0      \
    active_window_opacity     1.0      \
    normal_window_opacity     1.0      \
    window_shadow             on      \
    auto_balance              off      \
    split_type                vertical \
    split_ratio               0.5 \
    layout bsp

# space 1, inbuilt
yabai -m config --space 1 layout stack
yabai -m display 1 --space 1
yabai -m display 1 --label inbuilt

# space 2, external
yabai -m config --space 2 second_child
yabai -m display 2 --space 2
yabai -m display 2 --label external

# apparently sticky keeps a window across spaces? probs not that helpful, maybe if I had multiple spaces on ultrawide?
# can always trigger on and off

# todo
# when switching to kitty, and in stack, hide other items in stack (opacity 0?)
# when slack huddle opens, float it at a certain size, has `Huddle in the name`
# wallpaper https://github.com/dominiklohmann/25th-hour
#assigning spaces to displays
#
# notes
# `yabai -m window --swap largest` is a thing

# rules
# unmanaged
yabai -m rule --add app="^(Calculator|Software Update|Dictionary|VLC|zoom.us|Photo Booth|Archive Utility|LibreOffice|App Store|Steam|Alfred|Alfred Preferences|Activity Monitor|System Information|Karabiner-Elements|Karabiner-EventViewer|Preview|Disk Utility|OpenVPN Connect|Anki)$" manage=off
yabai -m rule --add app="^(System Preferences|System Settings)$" manage=off sticky=on

# signals
yabai -m signal --add event=window_created action="$HOME/.config/yabai/window_created.sh"
yabai -m signal --add event=window_destroyed action="$HOME/.config/yabai/window_destroyed.sh"
yabai -m signal --add event=application_hidden action="$HOME/.config/yabai/window_destroyed.sh"
yabai -m signal --add event=window_focused action="$HOME/.config/yabai/window_focused.sh"
yabai -m signal --add event=application_launched action="$HOME/.config/yabai/application_launched.sh"
yabai -m signal --add event=application_visible action="$HOME/.config/yabai/application_visible.sh"
